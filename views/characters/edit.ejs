<% include ../shared/header.ejs %>

<h1><%= title %></h1>

<form method="POST" id="edit">
    <fieldset class="form-group">
        <label for="name" class="control-label col-md-2">Name:</label>
        <input type="text" id="name" name="name" required value="<%= character.name %>">
    </fieldset>
    <fieldset class="form-group">
            <label for="race" class="control-label col-md-2">Race:</label>
            <select class="col-md-2" id="race" name="race" required onchange="kindredCheck()">
                    <option value="">Select a Race...</option>
                    <% for (let i = 0; i < race.length; i++) { %>
                    <option value="<%= race[i].name %>" <% if(race[i].name == character.race) { %> selected <% } %>><%= race[i].name %></option>
                    <% } %>
        </select>
    </fieldset>
    <fieldset class="form-group">
        <label for="gender" class="control-label col-md-2">Gender:</label>
        <fieldset class="form-check" style="display: inline;">
            <input class="form-check-input" type="radio" name="gender" id="male" value="Male" required <% if (character.gender == "Male") { %> checked <% } %>>
            <label class="form-check-label" for="male">Male</label>
        </fieldset>
        <fieldset class="form-check" style="display: inline;">
            <input class="form-check-input" type="radio" name="gender" id="female" value="Female" required <% if (character.gender == "Female") { %> checked <% } %>>
            <label class="form-check-label" for="female">Female</label>
        </fieldset>
        <fieldset class="form-check" style="display: inline;">
            <input class="form-check-input" type="radio" name="gender" id="other" value="Other" required <% if (character.gender == "Other") { %> checked <% } %>>
            <label class="form-check-label" for="other">Other</label>
        </fieldset>
        <p id="note">Note: Kindred are only Female.</p>
    </fieldset>
    <fieldset class="form-group">
        <label for="element" class="control-label col-md-2">Magic Element:</label>
        <input type="text" id="element" name="element" required value="<%= character.element %>">
    </fieldset>
    <fieldset class="form-group">
        <label for="summary" class="control-label col-md-2">Summary:</label>
        <textarea type="text" cols="100" rows="4" id="summary" name="summary"><%= character.summary %></textarea>
    </fieldset>
    <button class="btn btn-primary">Save</button>
</form>

<script>
    let kindred = document.getElementById('race');
    let male = document.getElementById('male');
    let female = document.getElementById('female');
    let other = document.getElementById('other');
    let note = document.getElementById('note');
    
    if (kindred.value == "Kindred") {
            male.disabled = true;
            female.checked = true;
            other.disabled = true;
            note.style.display = "block";
        }
    function kindredCheck() {
        if (kindred.value == "Kindred") {
            male.disabled = true;
            female.checked = true;
            other.disabled = true;
            note.style.display = "block";
        }
        else {
            male.disabled = false;
            female.checked = false;
            other.disabled = false;
            note.style.display = "none";
        }
    }
</script>

<% include ../shared/footer.ejs %>